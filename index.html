<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <script src="vue.js"></script>
  </head>
  <body>
    
    <div id="app">
      <component
        :is="currentView"
        :patches="patches"
        :downloading="downloading"
        :current-list-id="currentListId"
        @go="goToView"
        @showlist="showList"
      ></component>
    </div>
    
    <script type="x-template" id="login">
      <div class="login">
        <form action="" @submit.prevent="submit">
          <label for="email">Email</label>
          <input v-model="email" type="text">
          <br>
          <label for="token">API Token</label>
          <input v-model="token" type="text">
          <br>
          <button>Sign In</button>
        </form>
      </div>
    </script>
    
    <script type="x-template" id="browser">
      <div class="app-main">
        <div class="header">
          <h1>op1.fun</h1>
          <div class="icon config-icon" v-on:click="$emit('go', 'login')">
            <img src="images/gear.svg" alt="gear">
          </div>
          <transition name="fade">
            <div v-if="downloading" class="icon spinner">
              <span>{{ downloading }}</span>
              <img src="images/spinner.svg" alt="spinner">
            </div>
          </transition>
          <div class="clear"></div>
        </div>
        <div class="browser">
          <side-nav
            :patches="patches"
            :currentListId="currentListId"
            @showlist="$emit('showlist', $event)"
          ></side-nav>
          <div class="browser-content">
            <content-area
              :currentListId="currentListId"
              :patches="filteredPatches"
              :id="currentListId"
            ></content-area>
          </div>
        </div>
      </div>
    </script>
    
    <script type="x-template" id="patch-list">
      <div :id="id" class="patch-list">
        <template v-for="(packPatches, packName) in packs">
          <li :key="packName" v-if="packName !== 'null'">
            <a @click.prevent="showInFinder" :href="packPatches[0].packDir" class="pack">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor">
                <path d="M0 4 L0 28 L32 28 L32 8 L16 8 L12 4 z" vector-effect="non-scaling-stroke"></path>
              </svg>
              {{ packName }}
            </a>
          </li>
          <li v-for="patch in packPatches" :key="patch.relPath" :class="{ root: packName === 'null' }">
            <a @click.prevent="showInFinder" :href="patch.relPath" class="patch">
              {{ patch.name }}
            </a>
          </li>
        </template>
      </div>
    </script>
    
    <script type="x-template" id="backups">
      <div>
        Hi this is backups
      </div>
    </script>
    
    <script type="x-template" id="side-nav">
      <ul class="side-nav">
        <li v-for="item in navItems">
          <a @click.prevent="$emit('showlist', item.id)" :href="item.title.toLowerCase()" :class="[{ active: (item.id === currentListId) }, item.id ]">
            <h3 v-bind:class="item.id">{{ item.title }}</h3>
            <span>{{ item.subtitle }}</span>
          </a>
        </li>
      </ul>
    </script>
    
    <script src="front-end.js"></script>
  </body>
</html>
